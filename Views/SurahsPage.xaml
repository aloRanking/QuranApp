<rxui:ReactiveContentPage
    x:Class="QuranApp.Views.SurahsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:rxui="clr-namespace:ReactiveUI.Maui;assembly=ReactiveUI.Maui"
    xmlns:viewmodel="clr-namespace:QuranApp.ViewModels"
    Title="Quran"
    x:TypeArguments="viewmodel:SurahsViewModel">


    <Grid RowDefinitions="Auto,*">

        <Grid Padding="10" BackgroundColor="{AppThemeBinding Light=White, Dark=#222}">
            <!-- <Border
                BackgroundColor="White"
                HorizontalOptions="FillAndExpand"
                Stroke="Gray"
                StrokeShape="RoundRectangle 12"
                StrokeThickness="1">
                <SearchBar
                    BackgroundColor="Transparent"
                    CancelButtonColor="Gray"
                    HorizontalOptions="FillAndExpand"
                    Placeholder="Search Surahs..."
                    Text="{Binding SearchText, Mode=TwoWay}"
                    Visual="Material" />
            </Border> -->
            <Border
                
    StrokeThickness="0"
    BackgroundColor="#F0F0F0"
    StrokeShape="RoundRectangle 12"
    Padding="5"
    >

    <Grid ColumnDefinitions="Auto,*,Auto" VerticalOptions="Center">
       
        <Label 
            Text="🔍"
            FontSize="18"
            VerticalOptions="Center"
            Margin="0,0,8,0" />

       
        <Entry
            x:Name="SearchEntry" 
            Grid.Column="1"
            Placeholder="Search Surahs..."
            Text="{Binding SearchText, Mode=TwoWay}"
            FontSize="16"
            BackgroundColor="Transparent"
            TextColor="Black"
            PlaceholderColor="Gray"
            
            
            />
        
       
        <Button 
            Grid.Column="2"
            Text="Cancel"
            BackgroundColor="Transparent"
            TextColor="Blue"
            Command="{Binding CancelSearchCommand}" />
    </Grid>
</Border>

        </Grid>


        <Grid Grid.Row="1">
            <ActivityIndicator
                HorizontalOptions="Center"
                IsRunning="{Binding IsLoading}"
                IsVisible="{Binding IsLoading}"
                VerticalOptions="Center"
                Color="{AppThemeBinding Light=Blue,
                                        Dark=LightBlue}" />

            <CollectionView ItemsSource="{Binding FilteredSurahs}" SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid Padding="10" BackgroundColor="{AppThemeBinding Light=White, Dark=#333333}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />

                            </Grid.RowDefinitions>

                            <Grid.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:SurahsViewModel}}, Path=SurahSelectedCommand}" CommandParameter="{Binding .}" />
                            </Grid.GestureRecognizers>

                            <Border
                                Grid.Column="0"
                                Margin="0,0,10,0"
                                Padding="5"
                                BackgroundColor="{AppThemeBinding Light=LightBlue,
                                                                  Dark=SlateGray}"
                                HorizontalOptions="Center"
                                StrokeShape="RoundRectangle 12"
                                VerticalOptions="Center">
                                <Label
                                    Margin="5"
                                    FontAttributes="Bold"
                                    FontSize="16"
                                    HorizontalOptions="Center"
                                    Text="{Binding Id}"
                                    TextColor="{AppThemeBinding Light=DarkSlateGray,
                                                                Dark=LightGray}"
                                    VerticalOptions="Center" />

                            </Border>

                            <Grid
                                Grid.Row="0"
                                Grid.Column="1"
                                Padding="5"
                                RowDefinitions="Auto,Auto">

                                <Label
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    FontAttributes="Bold"
                                    FontSize="16"
                                    Text="{Binding Anglicised}"
                                    TextColor="{AppThemeBinding Light=Black,
                                                                Dark=White}" />



                                <Label Grid.Row="1" Grid.Column="1">
                                    <Label.FormattedText>
                                        <FormattedString>
                                            <Span
                                                FontSize="12"
                                                Text="{Binding English, StringFormat='({0})'}"
                                                TextColor="Gray" />
                                            <Span
                                                FontSize="12"
                                                Text=" - "
                                                TextColor="Gray" />
                                            <Span
                                                FontSize="12"
                                                Text="{Binding AyahCount, StringFormat='{0} Ayahs'}"
                                                TextColor="Gray" />
                                        </FormattedString>
                                    </Label.FormattedText>
                                </Label>

                            </Grid>


                            <Label
                                Grid.Column="2"
                                FontAttributes="Bold"
                                FontSize="20"
                                Text="{Binding Arabic}"
                                TextColor="{AppThemeBinding Light=Black,
                                                            Dark=Silver}" />

                            <BoxView
                                Grid.Row="1"
                                Grid.ColumnSpan="3"
                                Margin="0,20,0,0"
                                HeightRequest="1"
                                Color="{AppThemeBinding Light=LightGray,
                                                        Dark=#555555}" />
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>


    </Grid>





</rxui:ReactiveContentPage>